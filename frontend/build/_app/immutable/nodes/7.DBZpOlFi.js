import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as xa,h as ya,s as v,e as Sa}from"../chunks/C-cUeD8I.js";import{p as ja,m as T,l as Ma,j as Na,b as d,s as l,f as D,h as a,a as n,e as Ta,$ as Da,d as r,g as u,r as e,t as p,c as L,u as o}from"../chunks/DVhLo0Kx.js";import{i as f}from"../chunks/Bj3ioQdl.js";import{e as Aa,i as Ia}from"../chunks/Bt5UU4cX.js";import{r as La}from"../chunks/BMwGc5xt.js";import{b as Ha}from"../chunks/CbjkAijc.js";import{i as Ka}from"../chunks/CSakOhqG.js";import{g as za}from"../chunks/Fs8NSvnN.js";var Ra=d('<div class="alert alert-danger"> </div>'),qa=d("<p> </p>"),Ba=d('<div class="alert alert-info text-center mt-3"><h4 class="alert-heading"><i class="bi bi-calendar-heart"></i> Hari Libur</h4> <p> </p></div>'),Ca=d('<span class="badge bg-success"> </span>'),Ea=d('<span class="badge bg-warning text-dark"> </span>'),Ga=d('<span class="badge bg-danger"> </span>'),Oa=d('<span class="badge bg-secondary"> </span>'),Pa=d('<tr><td> </td><td> </td><td><!></td><td> </td><td class="text-center"><button class="btn btn-sm btn-warning"><i class="bi bi-pencil-square"></i></button> <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button></td></tr>'),Fa=d('<tr><td colspan="5" class="text-center">Tidak ada data untuk tanggal yang dipilih.</td></tr>'),Ja=d('<div class="card shadow-sm"><div class="card-body"><div class="table-responsive"><table class="table table-striped table-hover"><thead><tr><th>NISN</th><th>Nama Lengkap</th><th>Status</th><th>Keterangan</th><th class="text-center">Aksi</th></tr></thead><tbody></tbody></table></div></div></div>'),Qa=d('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Rekap & Manajemen Kehadiran</h1> <div class="btn-toolbar mb-2 mb-md-0"><a href="/dashboard/kehadiran/tambah" class="btn btn-sm btn-primary"><i class="bi bi-plus-circle"></i> Catat Absensi Massal</a></div></div> <div class="row"><div class="col-md-4 mb-3"><label for="tanggal" class="form-label fw-bold">Pilih Tanggal:</label> <input type="date" class="form-control" id="tanggal"/></div></div> <!> <!>',1);function et(w,aa){ja(aa,!1);let c=T(null),H=T(!0),A=T(""),j=T(""),b=T(new Date().toISOString().split("T")[0]);async function ta(){if(!(!a(j)||!a(b))){u(H,!0),u(A,"");try{const s=await fetch(`http://localhost:1412/api/absensi/rekap/${a(b)}?t=${new Date().getTime()}`,{headers:{Authorization:"Bearer "+a(j)},cache:"no-store"});if(!s.ok)throw new Error("Gagal memuat data rekap.");u(c,await s.json())}catch(s){u(A,s.message)}finally{u(H,!1)}}}xa(()=>{u(j,localStorage.getItem("jwt_token")||"")}),Ma(()=>(a(j),a(b)),()=>{a(j)&&a(b)&&ta()}),Na(),Ka();var Q=Qa();ya(s=>{Da.title="Manajemen Kehadiran"});var K=l(D(Q),2),U=r(K),V=l(r(U),2);La(V),e(U),e(K);var W=l(K,2);{var ea=s=>{var i=Ra(),M=r(i,!0);e(i),p(()=>v(M,a(A))),n(s,i)};f(W,s=>{a(A)&&s(ea)})}var ra=l(W,2);{var sa=s=>{var i=qa(),M=r(i);e(i),p(()=>v(M,`Memuat data untuk tanggal ${a(b)??""}...`)),n(s,i)},na=s=>{var i=L(),M=D(i);{var oa=z=>{var X=L(),la=D(X);{var da=g=>{var m=Ba(),N=l(r(m),2),I=r(N);e(N),e(m),p(()=>v(I,`Tanggal ${a(b)??""} adalah ${a(c),o(()=>a(c).holidayDescription)??""}. Tidak ada data absensi.`)),n(g,m)},ia=g=>{var m=Ja(),N=r(m),I=r(N),Y=r(I),Z=l(r(Y));Aa(Z,5,()=>(a(c),o(()=>a(c).daftarStatusSiswa)),Ia,(R,t)=>{var q=Pa(),B=r(q),va=r(B,!0);e(B);var C=l(B),ca=r(C,!0);e(C);var E=l(C),ba=r(E);{var pa=h=>{var k=Ca(),P=r(k,!0);e(k),p(()=>v(P,(a(t),o(()=>a(t).status)))),n(h,k)},ma=h=>{var k=L(),P=D(k);{var fa=x=>{var y=Ea(),F=r(y,!0);e(y),p(()=>v(F,(a(t),o(()=>a(t).status)))),n(x,y)},ga=x=>{var y=L(),F=D(y);{var ha=S=>{var _=Ga(),J=r(_,!0);e(_),p(()=>v(J,(a(t),o(()=>a(t).status)))),n(S,_)},ka=S=>{var _=Oa(),J=r(_,!0);e(_),p(()=>v(J,(a(t),o(()=>a(t).status)))),n(S,_)};f(F,S=>{a(t),o(()=>a(t).status==="Alpa")?S(ha):S(ka,!1)},!0)}n(x,y)};f(P,x=>{a(t),o(()=>a(t).status==="Sakit"||a(t).status==="Izin")?x(fa):x(ga,!1)},!0)}n(h,k)};f(ba,h=>{a(t),o(()=>a(t).status==="Hadir")?h(pa):h(ma,!1)})}e(E);var G=l(E),_a=r(G,!0);e(G);var $=l(G),O=r($),ua=l(O,2);e($),e(q),p(()=>{v(va,(a(t),o(()=>a(t).nisn))),v(ca,(a(t),o(()=>a(t).namaLengkap))),v(_a,(a(t),o(()=>a(t).keterangan))),O.disabled=(a(t),o(()=>!a(t).rowNumber)),ua.disabled=(a(t),o(()=>!a(t).rowNumber))}),Sa("click",O,()=>za(`/dashboard/kehadiran/edit/${a(t).rowNumber}`)),n(R,q)},R=>{var t=Fa();n(R,t)}),e(Z),e(Y),e(I),e(N),e(m),n(g,m)};f(la,g=>{a(c),o(()=>a(c).isHoliday)?g(da):g(ia,!1)})}n(z,X)};f(M,z=>{a(c)&&z(oa)},!0)}n(s,i)};f(ra,s=>{a(H)?s(sa):s(na,!1)})}Ha(V,()=>a(b),s=>u(b,s)),n(w,Q),Ta()}export{et as component};
