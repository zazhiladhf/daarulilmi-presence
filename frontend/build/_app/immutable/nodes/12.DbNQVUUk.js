import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as Y,h as Z,s as m,e as aa}from"../chunks/C-cUeD8I.js";import{p as ta,b as v,s as i,f as x,a as d,e as ea,$ as ra,d as r,g as b,m as y,h as e,r as s,t as D,c as G}from"../chunks/DVhLo0Kx.js";import{i as S}from"../chunks/Bj3ioQdl.js";import{e as sa,i as oa}from"../chunks/Bt5UU4cX.js";import{s as ia}from"../chunks/BMwGc5xt.js";import{i as na}from"../chunks/CSakOhqG.js";import"../chunks/D5AemU65.js";var da=v('<div class="alert alert-danger"> </div>'),la=v('<tr><td colspan="5" class="text-center">Memuat data siswa...</td></tr>'),ca=v('<tr><td> </td><td> </td><td> </td><td> </td><td><a class="btn btn-sm btn-warning"><i class="bi bi-pencil-square"></i></a> <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button></td></tr>'),ma=v('<tr><td colspan="5" class="text-center">Belum ada data siswa.</td></tr>'),va=v('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Manajemen Siswa</h1> <div class="btn-toolbar mb-2 mb-md-0"><a href="/dashboard/siswa/tambah" class="btn btn-sm btn-primary"><i class="bi bi-plus-circle"></i> Tambah Siswa Baru</a></div></div> <!> <div class="card shadow-sm"><div class="card-body"><div class="table-responsive"><table class="table table-striped table-hover"><thead><tr><th>NISN</th><th>Nama Lengkap</th><th>Kelas</th><th>Kontak Ortu</th><th>Aksi</th></tr></thead><tbody><!></tbody></table></div></div></div>',1);function xa(K,O){ta(O,!1);let c=y([]),j=y(!0),p=y("");Y(async()=>{{const a=localStorage.getItem("jwt_token");try{const t=await fetch("http://localhost:1412/api/siswa",{headers:{Authorization:"Bearer "+a}});if(!t.ok)throw new Error("Gagal mengambil data siswa dari server.");const o=await t.json();b(c,o)}catch(t){b(p,t.message),console.error(t)}finally{b(j,!1)}}});async function q(a,t){if(confirm(`Apakah Anda yakin ingin menghapus data siswa "${t}"?`))try{const o=localStorage.getItem("jwt_token");if(!(await fetch(`http://localhost:1412/api/siswa/${a}`,{method:"DELETE",headers:{Authorization:"Bearer "+o}})).ok)throw new Error("Gagal menghapus data.");b(c,e(c).filter(f=>f.NISN!==a))}catch(o){alert(o.message)}}na();var L=va();Z(a=>{ra.title="Manajemen Siswa"});var A=i(x(L),2);{var C=a=>{var t=da(),o=r(t,!0);s(t),D(()=>m(o,e(p))),d(a,t)};S(A,a=>{e(p)&&a(C)})}var E=i(A,2),M=r(E),N=r(M),B=r(N),I=i(r(B)),F=r(I);{var H=a=>{var t=la();d(a,t)},J=a=>{var t=G(),o=x(t);{var T=l=>{var h=G(),P=x(h);sa(P,1,()=>e(c),oa,(Q,n)=>{var _=ca(),u=r(_),R=r(u,!0);s(u);var g=i(u),U=r(g,!0);s(g);var w=i(g),V=r(w,!0);s(w);var k=i(w),W=r(k,!0);s(k);var $=i(k),z=r($),X=i(z,2);s($),s(_),D(()=>{m(R,e(n).nisn),m(U,e(n).namaLengkap),m(V,e(n).kelas),m(W,e(n).nomorTeleponOrtu),ia(z,"href",`/dashboard/siswa/edit/${e(n).nisn??""}`)}),aa("click",X,()=>q(e(n).nisn,e(n).namaLengkap)),d(Q,_)}),d(l,h)},f=l=>{var h=ma();d(l,h)};S(o,l=>{e(c).length>0?l(T):l(f,!1)},!0)}d(a,t)};S(F,a=>{e(j)?a(H):a(J,!1)})}s(I),s(B),s(N),s(M),s(E),d(K,L),ea()}export{xa as component};
