import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as vt,h as mt,s as c}from"../chunks/C-cUeD8I.js";import{p as ft,l as ht,j as pt,b as g,s as l,f as j,h as t,a as v,e as _t,m as h,$ as ut,d as e,g as m,r,c as Y,u as o,t as gt}from"../chunks/DVhLo0Kx.js";import{i as q}from"../chunks/Bj3ioQdl.js";import{e as bt,i as xt}from"../chunks/Bt5UU4cX.js";import{r as C}from"../chunks/BMwGc5xt.js";import{b as J}from"../chunks/CbjkAijc.js";import{i as yt}from"../chunks/CSakOhqG.js";var wt=g('<tr><td colspan="6" class="text-center">Memuat data...</td></tr>'),Dt=g('<tr><td> </td><td> </td><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td></tr>'),St=g('<tr><td colspan="6" class="text-center">Tidak ada data untuk rentang tanggal yang dipilih.</td></tr>'),Lt=g('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Laporan & Rekapitulasi Kehadiran</h1></div> <div class="card shadow-sm"><div class="card-body"><div class="row g-3 align-items-center mb-3"><div class="col-auto"><label for="startDate" class="col-form-label">Dari Tanggal:</label></div> <div class="col-auto"><input type="date" class="form-control" id="startDate"/></div> <div class="col-auto"><label for="endDate" class="col-form-label">Sampai Tanggal:</label></div> <div class="col-auto"><input type="date" class="form-control" id="endDate"/></div></div> <div class="table-responsive"><table class="table table-bordered table-hover"><thead class="table-light"><tr><th>NISN</th><th>Nama Lengkap</th><th class="text-center">Hadir</th><th class="text-center">Izin</th><th class="text-center">Sakit</th><th class="text-center">Alpa</th></tr></thead><tbody><!></tbody></table></div></div></div>',1);function Ot(P,Q){ft(Q,!1);let f=h(""),p=h([]),b=h(!1);const k=new Date,z=k.getFullYear(),M=k.getMonth(),U=new Date(z,M,1).toISOString().split("T")[0],V=new Date(z,M+1,0).toISOString().split("T")[0];let i=h(U),n=h(V);async function N(){if(!(!t(f)||!t(i)||!t(n))){m(b,!0);try{const a=await fetch(`http://localhost:1412/api/rekap?mulai=${t(i)}&selesai=${t(n)}`,{headers:{Authorization:"Bearer "+t(f)},cache:"no-store"});if(!a.ok)throw new Error("Gagal memuat data rekap.");m(p,await a.json())}catch(a){a.message}finally{m(b,!1)}}}vt(()=>{m(f,localStorage.getItem("jwt_token")||""),N()}),ht(()=>(t(i),t(n),t(f)),()=>{(t(i)||t(n))&&t(f)&&N()}),pt(),yt();var A=Lt();mt(a=>{ut.title="Laporan Kehadiran"});var K=l(j(A),2),O=e(K),x=e(O),y=l(e(x),2),$=e(y);C($),r(y);var B=l(y,4),E=e(B);C(E),r(B),r(x);var F=l(x,2),G=e(F),H=l(e(G)),W=e(H);{var X=a=>{var _=wt();v(a,_)},Z=a=>{var _=Y(),tt=j(_);{var at=d=>{var u=Y(),rt=j(u);bt(rt,1,()=>t(p),xt,(st,s)=>{var w=Dt(),D=e(w),lt=e(D,!0);r(D);var S=l(D),ot=e(S,!0);r(S);var L=l(S),it=e(L,!0);r(L);var I=l(L),nt=e(I,!0);r(I);var T=l(I),dt=e(T,!0);r(T);var R=l(T),ct=e(R,!0);r(R),r(w),gt(()=>{c(lt,(t(s),o(()=>t(s).nisn))),c(ot,(t(s),o(()=>t(s).namaLengkap))),c(it,(t(s),o(()=>t(s).hadir))),c(nt,(t(s),o(()=>t(s).izin))),c(dt,(t(s),o(()=>t(s).sakit))),c(ct,(t(s),o(()=>t(s).alpa)))}),v(st,w)}),v(d,u)},et=d=>{var u=St();v(d,u)};q(tt,d=>{t(p),o(()=>t(p).length>0)?d(at):d(et,!1)},!0)}v(a,_)};q(W,a=>{t(b)?a(X):a(Z,!1)})}r(H),r(G),r(F),r(O),r(K),J($,()=>t(i),a=>m(i,a)),J(E,()=>t(n),a=>m(n,a)),v(P,A),_t()}export{Ot as component};
