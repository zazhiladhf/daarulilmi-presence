import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as Y,h as F,s as $}from"../chunks/C-cUeD8I.js";import{p as G,m as I,l as O,j as T,b as g,s as d,f as W,t as v,h as a,a as _,e as q,$ as L,d as o,k as j,r,n as N,g as A,u as b}from"../chunks/DVhLo0Kx.js";import{e as B,i as D}from"../chunks/Bt5UU4cX.js";import{b as z}from"../chunks/B93iMbHO.js";import{i as P}from"../chunks/CSakOhqG.js";import{C as E,r as Q}from"../chunks/DbhIPtqb.js";const U=!0,V=U;var X=g("<option> </option>"),Z=g("<option> </option>"),aa=g('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Statistik Kehadiran</h1></div> <div class="card shadow-sm"><div class="card-body"><div class="row"><div class="col-md-3"><label for="year" class="form-label">Tahun</label> <select class="form-select" id="year"></select></div> <div class="col-md-3"><label for="month" class="form-label">Bulan</label> <select class="form-select" id="month"></select></div></div> <hr/> <div style="max-height: 400px;"><canvas id="myChart"></canvas></div></div></div>',1);function ca(K,M){G(M,!1);let p="",c=null;const H=[{value:7,name:"Juli"},{value:8,name:"Agustus"}],J=[2025,2026];let l=I(new Date().getMonth()+1),i=I(new Date().getFullYear());async function w(){if(p)try{const e=await fetch(`http://localhost:1412/api/statistik/bulanan/${a(i)}/${a(l)}`,{headers:{Authorization:"Bearer "+p},cache:"no-store"});if(!e.ok)throw new Error("Gagal memuat data statistik.");const t=await e.json();R(t)}catch(e){alert(e.message)}}function R(e){const t={labels:["Hadir","Izin","Sakit","Alpa"],datasets:[{label:"Jumlah Kehadiran",data:[e.totalHadir,e.totalIzin,e.totalSakit,e.totalAlpa],backgroundColor:["#198754","#ffc107","#fd7e14","#dc3545"]}]};if(c)c.data=t,c.update();else{const s=document.getElementById("myChart");s&&(E.register(...Q),c=new E(s,{type:"bar",data:t,options:{responsive:!0,plugins:{legend:{display:!1}}}}))}}Y(()=>{p=localStorage.getItem("jwt_token")||"",w()}),O(()=>(a(l),a(i),V),()=>{(a(l)||a(i))&&w()}),T(),P();var y=aa();F(e=>{L.title="Statistik Kehadiran"});var k=d(W(y),2),x=o(k),C=o(x),m=o(C),f=d(o(m),2);v(()=>{a(i),j(()=>{})}),B(f,5,()=>J,D,(e,t)=>{var s=X(),h=o(s,!0);r(s);var n={};v(()=>{$(h,a(t)),n!==(n=a(t))&&(s.value=(s.__value=a(t))??"")}),_(e,s)}),r(f),r(m);var S=d(m,2),u=d(o(S),2);v(()=>{a(l),j(()=>{})}),B(u,5,()=>H,D,(e,t)=>{var s=Z(),h=o(s,!0);r(s);var n={};v(()=>{$(h,(a(t),b(()=>a(t).name))),n!==(n=(a(t),b(()=>a(t).value)))&&(s.value=(s.__value=(a(t),b(()=>a(t).value)))??"")}),_(e,s)}),r(u),r(S),r(C),N(4),r(x),r(k),z(f,()=>a(i),e=>A(i,e)),z(u,()=>a(l),e=>A(l,e)),_(K,y),q()}export{ca as component};
