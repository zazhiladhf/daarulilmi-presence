import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as E,h as I,e as f,s as T}from"../chunks/C-cUeD8I.js";import{p as M,b as w,s as l,f as j,a as y,e as B,$ as G,d as r,h as k,m as A,r as n,n as L,g as R,t as S}from"../chunks/DVhLo0Kx.js";import{i as U}from"../chunks/Bj3ioQdl.js";import{i as z}from"../chunks/CSakOhqG.js";var D=w('<div class="alert alert-danger"> </div>'),K=w('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">QR Code Generator</h1></div> <!> <div class="card mt-3 shadow-sm"><div class="card-body"><div class="row align-items-center"><div class="col-md-7"><p class="mb-2">Klik tombol untuk menampilkan QR code absensi masuk atau pulang. QR code hanya valid selama 60 detik.</p> <button class="btn btn-success mb-2"><i class="bi bi-box-arrow-in-right"></i> Tampilkan QR Masuk</button> <button class="btn btn-danger mb-2"><i class="bi bi-box-arrow-left"></i> Tampilkan QR Pulang</button></div> <div class="col-md-5 text-center"><h5 id="qr-title" class="d-none">Scan QR Code Ini</h5> <img id="qr-code-img" src="" alt="QR Code akan muncul di sini" class="img-fluid border rounded" style="max-width: 256px; display: none;"/> <p id="qr-loading" style="display: none;">Memuat QR Code...</p></div></div></div></div>',1);function V(x,_){M(_,!1);let d="",i=A("");E(()=>{d=localStorage.getItem("jwt_token")||""});async function c(e){const a=document.getElementById("qr-code-img"),t=document.getElementById("qr-loading"),o=document.getElementById("qr-title");if(!(!a||!t||!o)){a.style.display="none",t.style.display="block",o.style.display="block",o.innerText=`Memuat QR Code Absen ${e}...`,R(i,"");try{const s=await fetch(`http://localhost:1412/api/qr/generate?type=${e}`,{method:"GET",headers:{Authorization:"Bearer "+d},cache:"no-store"});if(!s.ok){const $=await s.json();throw new Error($.message||"Gagal mengambil data dari server.")}const C=await s.blob();a.src=URL.createObjectURL(C),a.style.display="block",t.style.display="none",o.innerText=`Scan QR Code Absen ${e}`}catch(s){console.error("Error fetching QR code:",s),t.style.display="none",o.style.display="none",R(i,s.message)}}}z();var m=K();I(e=>{G.title="QR Code Generator"});var b=l(j(m),2);{var Q=e=>{var a=D(),t=r(a,!0);n(a),S(()=>T(t,k(i))),y(e,a)};U(b,e=>{k(i)&&e(Q)})}var p=l(b,2),u=r(p),v=r(u),g=r(v),h=l(r(g),2),q=l(h,2);n(g),L(2),n(v),n(u),n(p),f("click",h,()=>c("masuk")),f("click",q,()=>c("pulang")),y(x,m),B()}export{V as component};
