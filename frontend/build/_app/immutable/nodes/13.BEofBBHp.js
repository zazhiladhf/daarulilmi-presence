import"../chunks/DsnmJJEf.js";import"../chunks/DlWC4716.js";import{o as ma,h as da,e as va,s as I}from"../chunks/C-cUeD8I.js";import{p as pa,b as p,s as i,f as H,a as n,e as ca,t as u,g as m,m as b,$ as fa,h as e,c as ua,d as s,r as o,o as _,n as ba,i as _a}from"../chunks/DVhLo0Kx.js";import{i as g}from"../chunks/Bj3ioQdl.js";import{r as h}from"../chunks/BMwGc5xt.js";import{b as w}from"../chunks/CbjkAijc.js";import{p as ga}from"../chunks/D4Caz1gY.js";import{i as ha}from"../chunks/CSakOhqG.js";import{s as wa,a as ka}from"../chunks/H2P4P_7E.js";import{p as ya}from"../chunks/DNHlrJ5z.js";import{g as xa}from"../chunks/Fs8NSvnN.js";var Na=p("<p>Memuat data siswa...</p>"),Sa=p('<div class="alert alert-danger"> </div>'),$a=p('<div class="alert alert-success"> </div>'),Ea=p('<span class="spinner-border spinner-border-sm"></span> Menyimpan...',1),Oa=p('<div class="row"><div class="col-lg-8"><div class="card shadow-sm"><div class="card-body"><!> <!> <form><div class="mb-3"><label for="nisn" class="form-label">NISN</label> <input type="text" class="form-control" id="nisn" required/></div> <div class="mb-3"><label for="nama_lengkap" class="form-label">Nama Lengkap</label> <input type="text" class="form-control" id="nama_lengkap" required/></div> <div class="mb-3"><label for="kelas" class="form-label">Kelas</label> <input type="text" class="form-control" id="kelas" required/></div> <div class="mb-3"><label for="kontak_ortu" class="form-label">Kontak Orang Tua</label> <input type="text" class="form-control" id="kontak_ortu" required/></div> <div class="mb-3"><label for="email_ortu" class="form-label">Email Orang Tua</label> <input type="email" class="form-control" id="email_ortu" required/></div> <button type="submit" class="btn btn-primary"><!></button></form></div></div></div></div>'),Ta=p('<div class="alert alert-danger"> </div>'),ja=p('<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"><h1 class="h2">Edit Data Siswa</h1> <a href="/dashboard/siswa" class="btn btn-sm btn-outline-secondary"><i class="bi bi-arrow-left"></i> Kembali</a></div> <!>',1);function Ja(Q,R){pa(R,!1);const[V,W]=ka(),N=wa(ya,"$page",V).params.nisn;let S="",t=b(null),L=b(!0),k=b(!1),c=b(""),y=b("");ma(async()=>{{S=localStorage.getItem("jwt_token")||"";try{const r=await fetch(`http://localhost:1412/api/siswa/${N}`,{headers:{Authorization:"Bearer "+S}});if(!r.ok)throw new Error("Gagal mengambil data siswa.");m(t,await r.json())}catch(r){m(c,r.message)}finally{m(L,!1)}}});async function X(){m(k,!0),m(c,""),m(y,"");try{const r=await fetch(`http://localhost:1412/api/siswa/${N}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+S},body:JSON.stringify(e(t))}),d=await r.json();if(!r.ok)throw new Error(d.message);m(y,d.message),setTimeout(()=>{xa("/dashboard/siswa")},2e3)}catch(r){m(c,r.message)}finally{m(k,!1)}}ha();var A=ja();da(r=>{u(()=>fa.title=`Edit Siswa ${N??""}`)});var Y=i(H(A),2);{var Z=r=>{var d=Na();n(r,d)},aa=r=>{var d=ua(),ea=H(d);{var ta=f=>{var v=Oa(),x=s(v),D=s(x),z=s(D),B=s(z);{var sa=a=>{var l=Sa(),M=s(l,!0);o(l),u(()=>I(M,e(c))),n(a,l)};g(B,a=>{e(c)&&a(sa)})}var P=i(B,2);{var oa=a=>{var l=$a(),M=s(l);o(l),u(()=>I(M,`${e(y)??""}. Anda akan diarahkan kembali...`)),n(a,l)};g(P,a=>{e(y)&&a(oa)})}var $=i(P,2),E=s($),U=i(s(E),2);h(U),o(E);var O=i(E,2),C=i(s(O),2);h(C),o(O);var T=i(O,2),G=i(s(T),2);h(G),o(T);var j=i(T,2),J=i(s(j),2);h(J),o(j);var q=i(j,2),F=i(s(q),2);h(F),o(q);var K=i(q,2),ia=s(K);{var la=a=>{var l=Ea();ba(),n(a,l)},na=a=>{var l=_a("Simpan Perubahan");n(a,l)};g(ia,a=>{e(k)?a(la):a(na,!1)})}o(K),o($),o(z),o(D),o(x),o(v),u(()=>K.disabled=e(k)),w(U,()=>e(t).NISN,a=>_(t,e(t).NISN=a)),w(C,()=>e(t).NamaLengkap,a=>_(t,e(t).NamaLengkap=a)),w(G,()=>e(t).Kelas,a=>_(t,e(t).Kelas=a)),w(J,()=>e(t).NomorTeleponOrtu,a=>_(t,e(t).NomorTeleponOrtu=a)),w(F,()=>e(t).EmailOrtu,a=>_(t,e(t).EmailOrtu=a)),va("submit",$,ga(X)),n(f,v)},ra=f=>{var v=Ta(),x=s(v,!0);o(v),u(()=>I(x,e(c)||"Data siswa tidak ditemukan.")),n(f,v)};g(ea,f=>{e(t)?f(ta):f(ra,!1)},!0)}n(r,d)};g(Y,r=>{e(L)?r(Z):r(aa,!1)})}n(Q,A),ca(),W()}export{Ja as component};
